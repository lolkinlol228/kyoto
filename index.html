<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Мой профиль Steam</title>
    <link rel="stylesheet" href="/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>
    <div class="container">
        <div id="loading">Загрузка данных...</div>
        <div id="mainContent" style="display: none;">
            <div id="steamProfile"></div>
            <h2 class="section-title">Моя музыка</h2>

            <div id="player">
              <div class="album">
                <div class="heart"><i class="fas fa-heart"></i></div>
              </div>
              <div class="info">
                <div class="progress-bar">
                  <div class="time--current">0:00</div>
                  <div class="time--total">0:00</div>
                  <div class="fill"></div>
                </div>
                <div class="currently-playing">
                  <h2 class="song-name">Fine</h2>
                  <h3 class="artist-name">Lemon Demon</h3>
                </div>
                <div class="controls">
                  <div class="play"><i class="fas fa-play fa-2x"></i></div>
                  <div class="pause" style="display: none;"><i class="fas fa-pause fa-2x"></i></div>
                </div>
              </div>
            </div>

            <div class="track-container">
                <img src="/photos/night-dancer-imase.jpg" alt="Обложка imase" class="album-art">
                <div class="track-info">
                    <h3>Night Dancer</h3>
                    <p>imase</p>
                    <audio controls src="/music/imase-night-dancer.mp3" style="width: 100%;"></audio>
                </div>
            </div>
        </div>
    </div>
    <script>
        const steamId = '76561198988988911';

        // --- Код для отображения данных Steam (остается без изменений) ---
        async function getSteamData() { /* ... */ }
        function displayData({ player, games }) { /* ... */ }
        getSteamData();
        // Просто скопируйте JS код из прошлого примера

        // --- НОВЫЙ КОД ДЛЯ МУЗЫКАЛЬНОГО ПЛЕЕРА ---
        document.addEventListener('DOMContentLoaded', () => {
          const audio = new Audio('/music/Lemon-Demon-Fine.mp3');
          const playBtn = document.querySelector('#player .play');
  
          const pauseBtn = document.querySelector('#player .pause');
          const heartBtn = document.querySelector('#player .heart');
          const progressBarFill = document.querySelector('#player .fill');
          const timeCurrent = document.querySelector('#player .time--current');
          const timeTotal = document.querySelector('#player .time--total');

          playBtn.addEventListener('click', () => {
            audio.play();
            playBtn.style.display = 'none';
            pauseBtn.style.display = 'inline-block';
          });

          pauseBtn.addEventListener('click', () => {
            audio.pause();
            pauseBtn.style.display = 'none';
            playBtn.style.display = 'inline-block';
          });

          heartBtn.addEventListener('click', function() {
            this.classList.toggle('clicked');
          });

          // Обновление прогресс-бара
          audio.addEventListener('timeupdate', () => {
            const percentage = (audio.currentTime / audio.duration) * 100;
            progressBarFill.style.width = `${percentage}%`;
            timeCurrent.textContent = formatTime(audio.currentTime);
          });
          
          // Показываем общую длительность трека, когда он загрузится
          audio.addEventListener('loadedmetadata', () => {
             timeTotal.textContent = formatTime(audio.duration);
          });
          
          function formatTime(seconds) {
              let min = Math.floor(seconds / 60);
              let sec = Math.floor(seconds % 60);
              if (sec < 10) {
                  sec = `0${sec}`;
              }
              return `${min}:${sec}`;
          }
        });
    </script>
</body>
</html>
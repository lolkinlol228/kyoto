<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kyoto</title>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">

    <style>
@font-face {
  font-family: 'MyCustomFont'; 
  src: url('my.otf') format('opentype'); 
}
        :root {
            --background-body: linear-gradient(135deg, #0a0a0a 0%, #1a1225 50%, #2d1b3d 100%);
            --background-wrapper: rgba(42, 33, 61, 0.85); 
            --background-element: rgba(57, 48, 83, 0.75); 
            --primary-accent: #9A72FF;
            --secondary-accent: #C1AFFF;
            --tertiary-accent: #7C3AED;
            --text-primary: #F5F3FF;
            --text-secondary: #D0C9E6;
            --glow-shadow: 0 0 30px 5px rgba(154, 114, 255, 0.3);
            --subtle-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.5);
            --card-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            --win-color: #10B981;
            --loss-color: #EF4444;
            --kda-high: #06B6D4;
            --kda-good: #8B5CF6;
            --kda-avg: #F59E0B;
            --kda-low: #EF4444;
            --gradient-1: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-2: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --gradient-3: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
        }

body {
    background: var(--background-body);
    color: var(--text-primary);
    font-family: 'MyCustomFont', sans-serif; /* <-- ИЗМЕНЕННАЯ СТРОКА */
    overflow-x: hidden;
    position: relative;
}

        #particles-js-overlay {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -2; 
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(154, 114, 255, 0.07) 0%, transparent 45%),
                radial-gradient(circle at 80% 20%, rgba(124, 58, 237, 0.07) 0%, transparent 45%);
            pointer-events: none;
            z-index: -1;
        }

        .main-wrapper {
            max-width: 1240px;
            margin: 2rem auto;
            background: var(--background-wrapper);
            border-radius: 20px;
            padding: 20px; /* Уменьшил внутренний отступ для лучшего вида на малых экранах */
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: var(--subtle-shadow);
            backdrop-filter: blur(15px);
            position: relative;
            overflow: hidden; 
        }
        
        .main-wrapper::before { /* Вращающийся градиент под контентом wrapper'а */
            content: '';
            position: absolute;
            top: -75%; /* Увеличил смещение для более плавного эффекта по краям */
            left: -75%;
            width: 250%;
            height: 250%;
            background: conic-gradient(from 0deg, transparent, rgba(154, 114, 255, 0.03), transparent 40%, transparent);
            animation: rotate 25s linear infinite;
            z-index: 0; /* Должен быть под .container, но над фоном .main-wrapper */
        }


        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            position: relative; 
            z-index: 1; /* Чтобы контент был над псевдо-элементом .main-wrapper::before */
        }

        header .profile {
            display: flex;
            align-items: center;
            margin-bottom: 3rem;
            padding: 2rem;
            background: var(--background-element);
            border-radius: 15px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .avatar {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            border: 4px solid var(--primary-accent);
            box-shadow: var(--glow-shadow);
            margin-right: 2.5rem;
            object-fit: cover;
            transition: all 0.3s ease;
            position: relative;
        }

        .avatar:hover {
            transform: scale(1.05);
            box-shadow: 0 0 50px 10px rgba(154, 114, 255, 0.5);
        }

        .profile-info h1 {
            margin: 0;
            font-size: 3rem;
            color: var(--text-primary);
            font-family: 'MyCustomFont', sans-serif;
            font-weight: 900;
            text-shadow: 0 0 20px rgba(154, 114, 255, 0.5);
            background: linear-gradient(45deg, var(--primary-accent), var(--secondary-accent));
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .profile-info .nickname {
            font-size: 1.8rem;
            color: var(--secondary-accent);
            margin: 0.5rem 0;
            font-weight: 600;
            font-family: 'MyCustomFont', sans-serif;
        }

        .profile-info .description {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-top: 1rem;
            line-height: 1.6;
        }

        .status.online {
            color: #10B981;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
        }

        .status.online::before {
            content: '';
            width: 10px;
            height: 10px;
            background: #10B981;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; box-shadow: 0 0 5px #10B981; }
            50% { opacity: 0.5; box-shadow: 0 0 15px #10B981; }
        }

h2 {
    color: var(--primary-accent);
    margin-bottom: 2rem;
    text-align: center;
    font-size: 2.2rem;
    font-weight: 700;
      font-family: 'MyCustomFont', sans-serif; /* <--- ВОТ ЭТА СТРОКА! */
    text-shadow: 0 0 10px rgba(154, 114, 255, 0.3);
    position: relative;
}
         section h2 { 
            margin-top: 3rem;
         }
         section:first-of-type h2 { 
            margin-top: 0;
         }


        h2::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-accent), var(--secondary-accent));
            border-radius: 2px;
        }

        .game-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* Немного уменьшил minmax */
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .game {
            background: var(--background-element);
            padding: 2rem 1.5rem;
            border-radius: 15px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            text-align: center;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(5px); 
        }

        .game::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(154, 114, 255, 0.07), transparent);
            transition: left 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .game:hover::before {
            left: 100%;
        }

        .game:hover {
            transform: translateY(-10px) scale(1.02);
            border-color: var(--primary-accent);
            box-shadow: var(--card-shadow);
        }

        .game img {
            width: auto;
            height: 100px;
            margin-bottom: 1rem;
            object-fit: contain;
            transition: transform 0.3s ease;
            filter: drop-shadow(0 5px 15px rgba(0, 0, 0, 0.3));
        }

        .game:hover img {
            transform: scale(1.1);
        }

        .game-info h3 {
            margin: 1rem 0 0.5rem 0;
            color: var(--text-primary);
            font-size: 1.3rem;
            font-weight: 600;
        }

        .game-info p {
            margin: 0;
            color: var(--text-secondary);
            font-size: 1rem;
            font-weight: 500;
        }

        #player-section {
            margin-top: 3rem;
            padding: 2rem 0;
        }

        #player-section .player-wrapper {
            display: flex;
            justify-content: center;
            gap: 3rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }

        .player {
            background: var(--background-element);
            position: relative;
            width: 320px;
            height: 320px;
            overflow: hidden;
            border-radius: 15px;
            box-shadow: var(--card-shadow);
            border: 2px solid rgba(255, 255, 255, 0.1);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(5px);
        }

        .player:hover {
            transform: scale(1.05) rotateY(5deg);
            box-shadow: 0 20px 60px rgba(154, 114, 255, 0.3);
            border-color: var(--primary-accent);
        }

        .album {
            background-repeat: no-repeat;
            background-size: cover;
            background-position: center;
            width: 100%;
            height: 100%;
            border-radius: 12px;
            position: absolute;
            filter: brightness(0.8) contrast(1.1);
            transition: all 0.3s ease;
        }

        .player:hover .album {
            filter: brightness(0.6) contrast(1.2) blur(1px);
        }

        .info {
            height: 140px;
            width: 100%;
            position: absolute;
            bottom: 0;
            background: linear-gradient(to top, rgba(26, 18, 37, 0.95) 0%, rgba(42, 33, 61, 0.9) 50%, transparent 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 1rem;
            transform: translateY(60px);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            /* backdrop-filter: blur(5px); Убрал, т.к. может влиять на анимацию */
        }

        .player:hover .info {
            transform: translateY(0);
        }

        .currently-playing {
            text-align: center;
            width: 100%;
            margin-bottom: 1rem;
        }

        .song-name {
            font-size: 1.1rem;
            letter-spacing: 2px;
            color: var(--text-primary);
            margin: 0;
            font-weight: 700;
            font-family: 'MyCustomFont', sans-serif;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }

        .artist-name {
            font-size: 0.9rem;
            letter-spacing: 1px;
            color: var(--secondary-accent);
            margin: 0.5rem 0 0 0;
            font-weight: 500;
            opacity: 1;
            transform: translateY(0);
            transition: all 0.3s ease;
        }

        .controls {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 1rem;
            gap: 1rem;
        }

        .controls .play, .controls .pause {
            color: var(--secondary-accent);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 2rem;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid var(--secondary-accent);
            border-radius: 50%;
            background: rgba(154, 114, 255, 0.1);
            backdrop-filter: blur(5px);
        }

        .controls .play:hover, .controls .pause:hover {
            color: var(--text-primary);
            transform: scale(1.2);
            background: var(--primary-accent);
            box-shadow: 0 0 20px rgba(154, 114, 255, 0.5);
        }

        .dota-stats {
            margin-top: 4rem;
            background: var(--background-element);
            padding: 3rem;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px); 
            position: relative;
            overflow: hidden;
        }

        .dota-stats::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-accent), var(--secondary-accent), var(--tertiary-accent));
        }

        .dota-stats > h2 {
            margin-top: 0;
        }

        .dota-stats h3 { 
            text-align: center;
            color: var(--secondary-accent);
            font-size: 1.4rem;
            margin-top: 0;
            margin-bottom: 2rem;
            font-weight: 500;
            border-bottom: 1px solid var(--background-wrapper);
            padding-bottom: 1rem;
        }
       /* .dota-stats .heroes-overview h3, .dota-stats .match-overview h3, .dota-stats .activity-section h3 {
             margin-top:0;
        } */


        .heroes-overview {
            margin-bottom: 3rem;
        }

        .heroes-table {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            background: var(--background-wrapper);
            border-radius: 15px;
            padding: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .hero-table-header, .hero-table-row {
            display: grid;
            grid-template-columns: 2.5fr 1fr 1fr 1fr;
            align-items: center;
            padding: 1rem 1.5rem;
            border-radius: 10px;
        }

        .hero-table-header {
            background: linear-gradient(135deg, var(--tertiary-accent), var(--primary-accent));
            color: white;
            font-weight: 700;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 0.9rem;
        }
         .hero-table-header .hero-cell:first-child {
            text-align: left;
        }

        .hero-table-row {
            background: rgba(57, 48, 83, 0.7); 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .hero-table-row:hover {
            background: rgba(154, 114, 255, 0.1);
            transform: translateX(10px);
            border-color: var(--primary-accent);
            box-shadow: 0 5px 20px rgba(154, 114, 255, 0.2);
        }

        .hero-cell {
            text-align: center;
            font-weight: 500;
        }

        .hero-cell.hero-identity {
            display: flex;
            align-items: center;
            gap: 1rem;
            text-align: left;
            font-weight: 600;
        }

        .hero-identity img {
            width: 48px;
            height: 48px; 
            border-radius: 8px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            object-fit: cover;
        }

        .hero-table-row:hover .hero-identity img {
            border-color: var(--primary-accent);
            transform: scale(1.1);
        }

        .hero-cell.win { color: var(--win-color); font-weight: 700; text-shadow: 0 0 5px rgba(16, 185, 129, 0.3); }
        .hero-cell.loss { color: var(--loss-color); font-weight: 700; text-shadow: 0 0 5px rgba(239, 68, 68, 0.3); }
        .hero-cell.kda-high { color: var(--kda-high); font-weight: 700; text-shadow: 0 0 5px rgba(6, 182, 212, 0.3); }
        .hero-cell.kda-good { color: var(--kda-good); font-weight: 700; text-shadow: 0 0 5px rgba(139, 92, 246, 0.3); }
        .hero-cell.kda-avg { color: var(--kda-avg); font-weight: 700; text-shadow: 0 0 5px rgba(245, 158, 11, 0.3); }
        .hero-cell.kda-low { color: var(--kda-low); font-weight: 700; text-shadow: 0 0 5px rgba(239, 68, 68, 0.3); }

        .match-overview { /* Отступ для секции Обзор матчей */
            margin-bottom: 3rem;
        }

        .match-cards-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }

        .match-card {
            background: var(--background-wrapper);
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .match-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-accent), var(--secondary-accent));
        }

        .match-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--card-shadow);
            border-color: var(--primary-accent);
        }

        .match-card h4 {
            margin: 0 0 1rem 0;
            color: var(--secondary-accent);
            font-weight: 600;
            font-size: 1.1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
         .match-card h4 i {
            margin-right: 0.5rem;
         }

        .match-card .match-count {
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--text-primary);
            margin: 0 0 1.5rem 0;
            font-family: 'MyCustomFont', sans-serif;
            text-shadow: 0 0 10px rgba(154, 114, 255, 0.3);
        }

        .win-rate .win-rate-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin: 0 0 0.5rem 0;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 500;
        }

        .win-rate .win-rate-value {
            margin: 0 0 1rem 0;
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--text-primary);
            font-family: 'MyCustomFont', sans-serif;
        }

        .progress-bar-bg {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            height: 12px;
            overflow: hidden;
            position: relative;
        }

        .progress {
            background: linear-gradient(90deg, var(--primary-accent), var(--secondary-accent));
            height: 100%;
            border-radius: 10px;
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .progress::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        /* Стили для секции активности (только тепловая карта) */
        .activity-section {
            margin-top: 2.5rem;
        }

        .activity-section > h3 { /* Заголовок "Активность Dota 2" */
            text-align: center; 
            color: var(--secondary-accent);
            font-size: 1.3rem;
            margin-top: 2rem; /* Добавил отступ сверху */
            margin-bottom: 2rem; 
            font-weight: 500;
            border-bottom: 1px solid var(--background-wrapper);
            padding-bottom: 1rem;
        }

        .activity-by-day-heatmap {
            background-color: var(--background-wrapper); /* Используем фон обертки для контраста */
            padding: 1.5rem;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: var(--subtle-shadow);
        }

        .activity-by-day-heatmap h4 { /* Заголовки для каждого графика */
            color: var(--text-primary);
            text-align: center;
            margin-top: 0;
            margin-bottom: 1.5rem;
            font-size: 1.1rem;
            font-weight: 500;
            font-family: 'MyCustomFont', sans-serif;
        }

        .heatmap-legend {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 5px;
            margin-bottom: 1.5rem;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
        .heatmap-cell-legend {
            width: 15px;
            height: 15px;
            border-radius: 3px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .heatmap-cell-legend.matches-0 { background-color: var(--heatmap-0); }
        .heatmap-cell-legend.matches-1-3 { background-color: var(--heatmap-1-3); }
        .heatmap-cell-legend.matches-4-6 { background-color: var(--heatmap-4-6); }
        .heatmap-cell-legend.matches-7-9 { background-color: var(--heatmap-7-9); }
        .heatmap-cell-legend.matches-10plus { background-color: var(--heatmap-10plus); }

        .heatmap-grid-container {
            display: grid;
            grid-template-columns: auto 1fr; 
            gap: 10px;
            align-items: start; 
            max-width: 450px; 
            margin: 0 auto;
            background-color: var(--background-element);
            padding: 1rem;
            border-radius: 10px;
        }
        .heatmap-days-labels {
            display: grid;
            grid-template-rows: repeat(7, 1fr);
            gap: 4px; 
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-align: right;
            padding-right: 10px; 
        }
        .heatmap-days-labels div {
            height: 22px; 
            display: flex;
            align-items: center;
            justify-content: flex-end;
        }

        .heatmap-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr); 
            grid-auto-rows: 22px; 
            gap: 4px; 
        }
        .heatmap-cell {
            background-color: var(--heatmap-0);
            border-radius: 3px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            position: relative;
            border: 1px solid rgba(0,0,0,0.2);
            cursor: help;
        }
        .heatmap-cell:hover {
            transform: scale(1.2);
            z-index: 10;
            box-shadow: 0 0 10px var(--primary-accent);
        }
        .heatmap-cell.empty {
            background-color: transparent;
            border: none;
            cursor: default;
        }
        .heatmap-cell.matches-1-3 { background-color: var(--heatmap-1-3); }
        .heatmap-cell.matches-4-6 { background-color: var(--heatmap-4-6); }
        .heatmap-cell.matches-7-9 { background-color: var(--heatmap-7-9); }
        .heatmap-cell.matches-10plus { background-color: var(--heatmap-10plus); }


        .pirate-son {
            margin-top: 4rem;
            text-align: center;
            padding: 2rem;
            background: var(--background-element);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
        }

        .pirate-son h2 {
            text-transform: uppercase;
            font-size: 1.8rem;
            margin-bottom: 2rem;
        }
         .pirate-son h2 i {
            margin-right: 0.75rem;
         }

        .pirate-son-image-container {
            max-width: 500px;
            width: 100%;
            border: 3px solid var(--primary-accent);
            box-shadow: var(--glow-shadow);
            border-radius: 15px;
            overflow: hidden;
            margin: 1rem auto 0 auto;
            background: var(--background-element);
            transition: all 0.3s ease;
        }

        .pirate-son-image-container:hover {
            transform: scale(1.02);
            box-shadow: 0 0 40px 10px rgba(154, 114, 255, 0.4);
        }

        .pirate-son-image-container img {
            width: 100%;
            display: block;
            object-fit: cover;
            transition: all 0.3s ease;
        }

        .pirate-son-image-container:hover img {
            transform: scale(1.05);
        }

        /* Responsive Design */
        @media (max-width: 992px) {
             .game-stats {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            }
             .activity-charts { /* Контейнер для всех графиков активности */
                grid-template-columns: 1fr; 
            }
        }

        @media (max-width: 768px) {
            .main-wrapper {
                margin: 1rem;
                padding: 1.5rem;
            }
            
            header .profile {
                flex-direction: column;
                text-align: center;
                padding: 1.5rem;
            }
            
            .avatar {
                margin-right: 0;
                margin-bottom: 1.5rem;
                width: 150px;
                height: 150px;
            }
            .profile-info h1 { font-size: 2.5rem; }
            .profile-info .nickname { font-size: 1.5rem; }
            
            .game-stats {
                grid-template-columns: 1fr;
            }
            
            #player-section .player-wrapper {
                flex-direction: column;
                align-items: center;
            }
             .player {
                width: 90%;
                max-width: 300px; /* Ограничение для плеера */
            }
            
            .hero-table-header, .hero-table-row {
                grid-template-columns: 2fr 0.8fr 1fr 0.8fr; /* Адаптация таблицы героев */
                padding: 0.5rem;
                font-size: 0.8rem;
            }
             .hero-identity img {
                width: 40px;
                height: 40px;
            }
            
            .match-cards-container {
                grid-template-columns: 1fr;
            }
            .heatmap-grid-container {
                grid-template-columns: auto 1fr; 
                max-width: 100%;
            }
        }

        @media (max-width: 480px) {
             .main-wrapper { padding: 1rem; }
             header .profile { padding: 1rem; }
             .avatar { width: 120px; height: 120px;}
             .profile-info h1 { font-size: 2rem; }
             .profile-info .nickname { font-size: 1.3rem; }
             .profile-info .description { font-size: 0.9rem; }
             h2 { font-size: 1.6rem; }
             .game-stats { gap: 1rem; }
             .game { padding: 1.5rem 1rem;}
            
            #player-section .player-wrapper { gap: 1.5rem; }
            .player { max-width: 280px; height: 280px;}
            .info { height: 120px; transform: translateY(50px); }
            .song-name {font-size: 1rem;}
            .artist-name {font-size: 0.8rem;}
            .controls .play, .controls .pause { font-size: 1.6rem; width: 50px; height: 50px;}

            .hero-table-header, .hero-table-row {
                font-size: 0.75rem;
                padding: 0.4rem 0.5rem;
                grid-template-columns: 1.8fr 0.7fr 1fr 0.7fr; 
            }
            .hero-identity img {
                width: 32px;
                height: 32px;
                gap: 0.5rem;
            }
             .hero-cell.hero-identity span {
                font-size: 0.7rem; 
             }

            .match-card { padding: 1.5rem; }
            .match-card .match-count { font-size: 2rem; }
            .win-rate .win-rate-value { font-size: 1.1rem; }

            .heatmap-grid-container {
                grid-template-columns: 1fr; /* Метки дней сверху */
                gap: 5px;
            }
            .heatmap-days-labels {
                display: flex; 
                justify-content: space-around;
                text-align: center;
                padding-right: 0;
                margin-bottom: 5px;
            }
             .heatmap-days-labels div {
                height: auto;
                justify-content: center;
                padding: 2px; /* Небольшой отступ для меток */
             }
            .heatmap-grid {
                grid-auto-rows: 18px;
                gap: 3px;
            }
            .dota-stats { padding: 1.5rem; }
            .dota-stats h3 { font-size: 1.2rem; margin-bottom: 1.5rem; padding-bottom: 0.75rem;}
            .activity-section > h3 { font-size: 1.2rem; }
            .activity-by-day-heatmap h4 {font-size: 1rem;}
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(154, 114, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary-accent);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--background-element);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-accent);
            border-radius: 10px;
            border: 2px solid var(--background-element); /* Отступ для большого пальца */
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--secondary-accent);
        }
        
    </style>
</head>
<body>
    <div id="particles-js-overlay"></div> <div class="main-wrapper animate__animated animate__fadeIn">
        <div class="container">
            <header>
                <div class="profile animate__animated animate__fadeInUp">
                    <img src="public/photos/avatar.jpg" alt="Аватар Kyoto" class="avatar">
                    <div class="profile-info">
                        <h1>娃草你媽</h1>
                        <p class="nickname">Kyoto</p>
                        <p class="status online"><i class="fas fa-circle"></i> Online</p>
                        <p class="description">Добро пожаловать на мой персональный сайт! Здесь вы найдете информацию о моих игровых достижениях, любимой музыке и многом другом.</p>
                    </div>
                </div>
            </header>

            <main>
                <section class="games animate__animated animate__fadeInUp animate__delay-1s">
                    <h2><i class="fas fa-gamepad"></i> Игровая статистика</h2>
                    <div class="game-stats">
                        <div class="game">
                            <img src="public/photos/dota2.jpg" alt="Dota 2">
                            <div class="game-info">
                                <h3>Dota 2</h3>
                                <p>3754 ч. всего</p>
                            </div>
                        </div>
                        <div class="game">
                            <img src="public/photos/cs2.jpg" alt="CS2">
                            <div class="game-info">
                                <h3>CS2</h3>
                                <p>128 ч. всего</p>
                            </div>
                        </div>
                         <div class="game">
                            <img src="public/photos/tooth.jpg" alt="SCP: Secret Laboratory">
                            <div class="game-info">
                                <h3>SCP: Secret Laboratory</h3>
                                <p>532,8 ч. всего</p>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="player-section" class="animate__animated animate__fadeInUp animate__delay-2s">
                    <h2><i class="fas fa-music"></i> Музыка</h2>
                    <div class="player-wrapper">
                        <div id="player1" class="player">
                            <div class="album" style="background-image: url('public/photos/fine-lemon-demon.jpg');"></div>
                            <div class="info">
                                <div class="currently-playing">
                                    <h2 class="song-name">Fine</h2>
                                    <h3 class="artist-name">Lemon Demon</h3>
                                </div>
                                <div class="controls">
                                    <div class="play"><i class="fas fa-play"></i></div>
                                    <div class="pause" style="display:none;"><i class="fas fa-pause"></i></div>
                                </div>
                            </div>
                        </div>

                        <div id="player2" class="player">
                            <div class="album" style="background-image: url('public/photos/night-dancer-imase.jpg');"></div>
                            <div class="info">
                                <div class="currently-playing">
                                    <h2 class="song-name">NIGHT DANCER</h2>
                                    <h3 class="artist-name">imase</h3>
                                </div>
                                <div class="controls">
                                    <div class="play"><i class="fas fa-play"></i></div>
                                    <div class="pause" style="display:none;"><i class="fas fa-pause"></i></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="dota-stats animate__animated animate__fadeInUp animate__delay-3s">
                    <h2><i class="fab fa-dota-2"></i> Статистика Dota 2</h2>
                    <div class="heroes-overview">
                        <h3>Самые популярные герои</h3>
                        <div class="heroes-table">
                            <div class="hero-table-header">
                                <div class="hero-cell">Герой</div>
                                <div class="hero-cell">Матчи</div>
                                <div class="hero-cell">% Побед</div>
                                <div class="hero-cell">KDA</div>
                            </div>
                            <div class="hero-table-row">
                                <div class="hero-cell hero-identity">
                                    <img src="https://ru.dotabuff.com/assets/heroes/tinker-6918f11bb007864769ddc626de0a805de1add6545fdef10661d87aa8a87c14bd.jpg" alt="Tinker">
                                    <span>Tinker</span>
                                </div>
                                <div class="hero-cell">402</div>
                                <div class="hero-cell win">58.71%</div>
                                <div class="hero-cell kda-high">4.92</div>
                            </div>
                            <div class="hero-table-row">
                                <div class="hero-cell hero-identity">
                                    <img src="https://ru.dotabuff.com/assets/heroes/clinkz-be9ff91bfbad16f06252c5c2c92d0b4bc57c81fd8d34274b7f2e48abfdbe6baf.jpg" alt="Clinkz">
                                    <span>Clinkz</span>
                                </div>
                                <div class="hero-cell">192</div>
                                <div class="hero-cell win">59.90%</div>
                                <div class="hero-cell kda-good">4.08</div>
                            </div>
                            <div class="hero-table-row">
                                <div class="hero-cell hero-identity">
                                    <img src="https://ru.dotabuff.com/assets/heroes/rubick-4f30f4875beef82cc20cac342bfcf650aabed1adcb567b5ed78821af442eaea7.jpg" alt="Rubick">
                                    <span>Rubick</span>
                                </div>
                                <div class="hero-cell">189</div>
                                <div class="hero-cell win">52.91%</div>
                                <div class="hero-cell kda-good">4.46</div>
                            </div>
                            <div class="hero-table-row">
                                <div class="hero-cell hero-identity">
                                    <img src="https://ru.dotabuff.com/assets/heroes/timbersaw-321135b3244478c8de6a9fbb24d6e10cfa92aea5577f9818224469f1febac42f.jpg" alt="Timbersaw">
                                    <span>Timbersaw</span>
                                </div>
                                <div class="hero-cell">70</div>
                                <div class="hero-cell win">61.43%</div>
                                <div class="hero-cell kda-good">3.91</div>
                            </div>
                            <div class="hero-table-row">
                                <div class="hero-cell hero-identity">
                                    <img src="https://ru.dotabuff.com/assets/heroes/dazzle-86cf49171e9c0d74bf71fa7f120e88279f70c3e812ec36403b93fa1507539a4e.jpg" alt="Dazzle">
                                    <span>Dazzle</span>
                                </div>
                                <div class="hero-cell">69</div>
                                <div class="hero-cell loss">46.38%</div>
                                <div class="hero-cell kda-low">2.79</div>
                            </div>
                            <div class="hero-table-row">
                                <div class="hero-cell hero-identity">
                                    <img src="https://ru.dotabuff.com/assets/heroes/troll-warlord-e6a37904fa5bb2b00734815a476ca08b61a327e03a08ff74e6aae7d11d27e97c.jpg" alt="Troll Warlord">
                                    <span>Troll Warlord</span>
                                </div>
                                <div class="hero-cell">63</div>
                                <div class="hero-cell win">60.32%</div>
                                <div class="hero-cell kda-good">3.83</div>
                            </div>
                            <div class="hero-table-row">
                                <div class="hero-cell hero-identity">
                                    <img src="https://ru.dotabuff.com/assets/heroes/puck-3604bf1b73a3d57eadba6b470bdd79b727034d4db27f461d5288480b03364987.jpg" alt="Puck">
                                    <span>Puck</span>
                                </div>
                                <div class="hero-cell">56</div>
                                <div class="hero-cell loss">46.43%</div>
                                <div class="hero-cell kda-avg">3.44</div>
                            </div>
                            <div class="hero-table-row">
                                <div class="hero-cell hero-identity">
                                    <img src="https://ru.dotabuff.com/assets/heroes/techies-e199ba8af1a4508668ec6cc16ecc96fe38231a4dd021a72e30d76d14e7e2cdb8.jpg" alt="Techies">
                                    <span>Techies</span>
                                </div>
                                <div class="hero-cell">48</div>
                                <div class="hero-cell loss">43.75%</div>
                                <div class="hero-cell kda-low">2.48</div>
                            </div>
                             <div class="hero-table-row">
                                <div class="hero-cell hero-identity">
                                    <img src="https://ru.dotabuff.com/assets/heroes/terrorblade-7c6431bd7f698af3dbcb186d58f731b4c3e4231f99cf3c8106cc0f44ac70a42d.jpg" alt="Terrorblade">
                                    <span>Terrorblade</span>
                                </div>
                                <div class="hero-cell">46</div>
                                <div class="hero-cell loss">45.65%</div>
                                <div class="hero-cell kda-low">2.71</div>
                            </div>
                            <div class="hero-table-row">
                                <div class="hero-cell hero-identity">
                                    <img src="https://ru.dotabuff.com/assets/heroes/shadow-fiend-90e318481e82c840eafe05b7d53a05b670f380e9d6ee523f339449e355044296.jpg" alt="Shadow Fiend">
                                    <span>Shadow Fiend</span>
                                </div>
                                <div class="hero-cell">44</div>
                                <div class="hero-cell loss">47.73%</div>
                                <div class="hero-cell kda-low">2.85</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="match-overview">
                        <h3>Обзор матчей</h3>
                        <div class="match-cards-container">
                            <div class="match-card">
                                <h4><i class="fas fa-trophy"></i> Рейтинговые</h4>
                                <p class="match-count">2,127</p>
                                <div class="win-rate">
                                    <p class="win-rate-label">Процент побед</p>
                                    <p class="win-rate-value">50.92%</p>
                                    <div class="progress-bar-bg"><div class="progress" style="width: 50.92%;"></div></div>
                                </div>
                            </div>
                            <div class="match-card">
                                <h4><i class="fas fa-users"></i> Обычные</h4>
                                <p class="match-count">378</p>
                                <div class="win-rate">
                                    <p class="win-rate-label">Процент побед</p>
                                    <p class="win-rate-value">46.83%</p>
                                    <div class="progress-bar-bg"><div class="progress" style="width: 46.83%;"></div></div>
                                </div>
                            </div>
                            <div class="match-card">
                                <h4><i class="fas fa-sun"></i> Сторона Света</h4>
                                <p class="match-count">1,230</p>
                                <div class="win-rate">
                                    <p class="win-rate-label">Процент игр</p>
                                    <p class="win-rate-value">52.52%</p>
                                    <div class="progress-bar-bg"><div class="progress" style="width: 52.52%;"></div></div>
                                </div>
                            </div>
                            <div class="match-card">
                                <h4><i class="fas fa-moon"></i> Сторона Тьмы</h4>
                                <p class="match-count">1,275</p>
                                <div class="win-rate">
                                    <p class="win-rate-label">Процент игр</p>
                                    <p class="win-rate-value">48.16%</p>
                                    <div class="progress-bar-bg"><div class="progress" style="width: 48.16%;"></div></div>
                                </div>
                            </div>
                        </div>
                    </div>

                   

                <section class="pirate-son animate__animated animate__fadeInUp animate__delay-4s">
                    <h2><i class="fas fa-skull-crossbones"></i> сын сереги пирата</h2>
                    <div class="pirate-son-image-container">
                        <img src="public/photos/seregapirat.jpg" alt="Сын Сереги Пирата">
                    </div>
                </section>
            </main>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/particles.js/2.0.0/particles.min.js"></script>
    <script>
        $(document).ready(function(){
            // Initialize particles background
            if (typeof particlesJS !== 'undefined') {
                particlesJS('particles-js-overlay', { 
                    particles: {
                        number: { value: 50, density: { enable: true, value_area: 900 } },
                        color: { value: '#9A72FF' }, 
                        shape: { type: 'circle' },
                        opacity: { value: 0.15, random: true, anim: { enable: true, speed: 0.3, opacity_min: 0.05, sync: false } },
                        size: { value: 2.5, random: true, anim: { enable: false } },
                        line_linked: {
                            enable: true,
                            distance: 130,
                            color: '#C1AFFF', 
                            opacity: 0.1,
                            width: 1
                        },
                        move: {
                            enable: true,
                            speed: 1.5,
                            direction: 'none',
                            random: true,
                            straight: false,
                            out_mode: 'out',
                            bounce: false
                        }
                    },
                    interactivity: {
                        detect_on: 'canvas',
                        events: {
                            onhover: { enable: true, mode: 'grab' }, 
                            onclick: { enable: false }, 
                            resize: true
                        },
                         modes: {
                            grab: { distance: 120, line_opacity: 0.25 },
                            repulse: { distance: 100, duration: 0.4 }
                        }
                    },
                    retina_detect: true
                });
            }

            let audio1, audio2;
            let isPlaying1 = false, isPlaying2 = false;

            try {
                audio1 = new Audio('public/music/Lemon-Demon-Fine.mp3');
                audio2 = new Audio('public/music/imase-night-dancer.mp3');
            } catch (e) {
                console.log('Audio initialization failed - using mock functionality');
                const mockAudio = { 
                    play: function() { this.paused = false; console.log('Mock play'); }, 
                    pause: function() { this.paused = true; console.log('Mock pause'); }, 
                    paused: true, 
                    addEventListener: function(event, callback) { if(event === 'ended') this.onended = callback; } ,
                    onended: null,
                    src: ''
                };
                audio1 = Object.assign({}, mockAudio);
                audio2 = Object.assign({}, mockAudio);
            }


            function setupPlayer(playerElement, audio, playerNumber) {
                const playBtn = playerElement.find('.play');
                const pauseBtn = playerElement.find('.pause');
                
                playBtn.click(function(e){
                    e.stopPropagation();
                    
                    if (playerNumber === 1 && isPlaying2 && typeof audio2.pause === 'function') { 
                        audio2.pause();
                        $('#player2').removeClass('playing').find('.pause').hide().end().find('.play').show();
                        isPlaying2 = false;
                    } else if (playerNumber === 2 && isPlaying1 && typeof audio1.pause === 'function') { 
                        audio1.pause();
                        $('#player1').removeClass('playing').find('.pause').hide().end().find('.play').show();
                        isPlaying1 = false;
                    }
                    
                    if (typeof audio.play === 'function') audio.play();
                    
                    playBtn.hide();
                    pauseBtn.show();
                    
                    if (playerNumber === 1) isPlaying1 = true;
                    else isPlaying2 = true;
                    
                    playerElement.addClass('playing');
                    gsap.fromTo(pauseBtn[0], { scale: 0.5, rotation: -90, opacity: 0 }, { scale: 1, rotation: 0, opacity: 1, duration: 0.4, ease: "back.out(1.7)" });
                });

                pauseBtn.click(function(e){
                    e.stopPropagation();
                    if (typeof audio.pause === 'function') audio.pause();
                    
                    pauseBtn.hide();
                    playBtn.show();
                    
                    if (playerNumber === 1) isPlaying1 = false;
                    else isPlaying2 = false;
                    
                    playerElement.removeClass('playing');
                     gsap.fromTo(playBtn[0], { scale: 0.5, rotation: 90, opacity: 0 }, { scale: 1, rotation: 0, opacity: 1, duration: 0.4, ease: "back.out(1.7)" });
                });

                if(typeof audio.addEventListener === 'function') { 
                    audio.addEventListener('ended', function() {
                       pauseBtn.hide();
                       playBtn.show();
                       if (playerNumber === 1) isPlaying1 = false;
                       else isPlaying2 = false;
                       playerElement.removeClass('playing');
                    });
                }

                playerElement.hover(
                    function() {
                        if (!$(this).hasClass('playing')) { 
                             gsap.to($(this).find('.album'), { scale: 1.03, duration: 0.3, ease: "power1.out" });
                        }
                    },
                    function() {
                         if (!$(this).hasClass('playing')) {
                            gsap.to($(this).find('.album'), { scale: 1, duration: 0.3, ease: "power1.inOut" });
                        }
                    }
                );
            }

            setupPlayer($('#player1'), audio1, 1);
            setupPlayer($('#player2'), audio2, 2);

            $('.hero-table-row').hover(
                function() {
                    gsap.to(this, { x: 5, duration: 0.2, ease: "power1.out" });
                },
                function() {
                    gsap.to(this, { x: 0, duration: 0.2, ease: "power1.inOut" });
                }
            );

            const animateProgressBars = () => {
                $('.progress').each(function() {
                    const progress = $(this);
                    const targetWidth = progress.css('width'); 
                    progress.css('width', '0%'); 
                    
                    gsap.to(progress[0], {
                        width: targetWidth,
                        duration: 1.5,
                        delay: 0.2,
                        ease: "power2.out"
                    });
                });
            };

            if (typeof IntersectionObserver !== 'undefined') {
                const observerOptions = { threshold: 0.1, rootMargin: '0px 0px -50px 0px' };
                const animatedElements = document.querySelectorAll('.animate__animated');
                
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            // Анимация для .animate__animated, кроме .main-wrapper (которое уже имеет fadeIn)
                            if (!entry.target.classList.contains('animate__fadeIn')) { 
                                $(entry.target).css('visibility', 'visible'); 
                                // Удаляем классы задержки перед добавлением класса fadeIn, чтобы они не конфликтовали
                                let delayClass = "";
                                entry.target.classList.forEach(cls => {
                                    if(cls.startsWith("animate__delay-")) delayClass = cls;
                                });
                                $(entry.target).removeClass (function (index, className) {
                                    return (className.match (/(^|\s)animate__delay-\S+/g) || []).join(' ');
                                }).addClass('animate__fadeInUp');
                                if(delayClass) $(entry.target).addClass(delayClass); // Возвращаем класс задержки
                            }

                            if (entry.target.classList.contains('match-cards-container')) {
                                animateProgressBars();
                            }
                            observer.unobserve(entry.target); 
                        }
                    });
                }, observerOptions);

                animatedElements.forEach(el => {
                     if (!el.classList.contains('animate__fadeIn')) { 
                         $(el).css('visibility', 'hidden'); 
                         observer.observe(el);
                     }
                });
                 document.querySelectorAll('.match-cards-container').forEach(el => {
                     observer.observe(el);
                 });
            } else {
                $('.animate__animated').css('visibility', 'visible');
                animateProgressBars(); 
            }


            $('.game').each(function(index) {
                gsap.to(this, {
                    y: (index % 2 === 0) ? -7 : -12, 
                    duration: 2 + (Math.random() * 1.5), 
                    repeat: -1,
                    yoyo: true,
                    ease: "sine.inOut",
                    delay: Math.random() * 0.5 
                });
            });

            $('.match-card, .game, .player').click(function(e) {
                if ($(e.target).closest('.controls').length) { // Не применять клик, если он на контролах плеера
                    return;
                }
                gsap.fromTo(this, 
                    { scale: 1 },
                    { scale: 0.97, duration: 0.1, yoyo: true, repeat: 1, ease: "power2.inOut"}
                );
            });

            const titleElement = document.querySelector('.profile-info h1');
            if (titleElement) {
                const titleText = titleElement.textContent;
                titleElement.textContent = '';
                let charIndex = 0;
                const typeWriter = () => {
                    if (charIndex < titleText.length) {
                        titleElement.textContent += titleText.charAt(charIndex);
                        charIndex++;
                        setTimeout(typeWriter, 120);
                    }
                };
                setTimeout(typeWriter, 500); 
            }

            console.log('%c🎮 Welcome to Kyoto\'s Profile! 🎮', 'color: #9A72FF; font-size: 20px; font-weight: bold;');
            console.log('%cEnhanced with modern web technologies!', 'color: #C1AFFF; font-size: 14px;');
        });
    </script>
</body>
</html>